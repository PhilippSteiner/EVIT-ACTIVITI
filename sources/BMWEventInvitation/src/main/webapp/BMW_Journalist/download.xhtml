<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <head>
        <title>TODO supply a title</title>
    </head>
    <body>


        <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">  
            <p:graphicImage value="/resources/img/ajaxloadingbar.gif" />  
        </p:dialog>  

        <h:form id="form">  

            <p:dataTable var="File" value="#{fileupload.eventFolder}">  
                <p:column headerText="Files">  
                    <h:outputText value="#{File.name}" />
                </p:column>  
                <p:column headerText="Download">

                    <p:commandButton id="downloadLink" value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop)"   
                                     icon="ui-icon-arrowthichk-s">  
                        <p:fileDownload value="#{fileDownloadController.file}" /> 
                        <f:setPropertyActionListener value="#{File}" target="#{JournalistBean.selectedBmwEvent}" />
                    </p:commandButton>  

                </p:column>

            </p:dataTable>  

        </h:form>  

        <script type="text/javascript">  
            function start() {  
                statusDialog.show();  
            }  
  
            function stop() {  
                statusDialog.hide();  
            }  
        </script> 
    </body>
</html>

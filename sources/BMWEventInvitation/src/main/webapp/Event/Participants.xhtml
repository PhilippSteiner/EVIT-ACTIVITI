<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/template.xhtml">
	<ui:define name="body">

			<h:outputText style="font-size: x-large" value="#{Participants.current.name}"></h:outputText>
        <p:tabMenu activeIndex="1">  
       <ui:include src="menu.xhtml"></ui:include>
        </p:tabMenu>

		<h:form id="BmwUserListForm">

			<p:panel header="Teilnehmer">

				<p:dataTable id="datalist" value="#{Participants.selectedp}" var="item"
							 rowKey="#{item.id}"
							 rowStyleClass="#{item.PState == 'eingeladen' ? 'red' : (item.PState == 'zugesagt' ? 'green' : (item.PState == 'auto' ? 'blue': ( item.PState == 'flug' ? 'yellow' : (item.PState == 'ticket' ? 'magenta' : null))))}"

							 paginator="true"
							 rows="10"
							 rowsPerPageTemplate="10,20,30"
							 >


					<p:column sortBy="#{item.userId.personenID.vorname}" filterBy="#{item.userId.personenID.vorname}">
						<f:facet name="header">
							<h:outputText value="Vorname"/>
						</f:facet>
						<h:outputText value="#{item.userId.personenID.vorname}"/>
					</p:column>

					<p:column sortBy="#{item.userId.personenID.nachname}" filterBy="#{item.userId.personenID.nachname}">
						<f:facet name="header">
							<h:outputText value="Nachname"/>
						</f:facet>
						<h:outputText value="#{item.userId.personenID.nachname}"/>
					</p:column>
					<p:column sortBy="#{item.userId.personenID.firma}" filterBy="#{item.userId.personenID.firma}">
						<f:facet name="header">
							<h:outputText value="Firma"/>
						</f:facet>
						<h:outputText value="#{item.userId.personenID.firma}"/>
					</p:column>
					<p:column sortBy="#{item.userId.rating}" filterBy="#{item.userId.rating}">
						<f:facet name="header">
							<h:outputText value="Rating"/>
						</f:facet>
						<h:outputText value="#{item.userId.rating}"/>
					</p:column>
					<p:column sortBy="#{item.PState}" filterBy="#{item.PState}">
						<f:facet name="header">
							<h:outputText value="Status"/>
						</f:facet>
						<h:outputText value="#{item.PState}"/>
					</p:column>

					<f:facet name="footer">
						<!-- <p:commandButton id="multiViewButton" value="View" icon="ui-icon-search"
								 update=":BmwUserListForm:displayMulti" oncomplete="multiCarDialog.show()"/>-->
						<p:commandButton id="Submit" value="Speichern" action="#{processParticipants.saveSelected()}" oncomplete="cityDialog.show()" style="margin-top:5px"/>



					</f:facet>

				</p:dataTable>



				<p:dialog id="multiDialog" header="Teilnehmer Ãœbersicht" widgetVar="multiCarDialog"
						  height="300" showEffect="fade" hideEffect="explode">
					<p:dataList id="displayMulti" value="#{Participants.selected}" var="i" >
						#{i.personenID.nameVollstaendig}
					</p:dataList>


				</p:dialog>
			</p:panel>
		</h:form>

    </ui:define>


    </ui:composition>

